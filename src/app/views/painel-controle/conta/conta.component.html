<app-preloader *ngIf="loading;else usuarioTemplate"></app-preloader>
<ng-template #usuarioTemplate>
  <mat-expansion-panel class="animated fadeInUp">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Usuário
      </mat-panel-title>
      <mat-panel-description>
        Informações do usuário
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-usuario-form [edit]="true" [objeto]="usuario"></app-usuario-form>
  </mat-expansion-panel>

  <br>

  <mat-expansion-panel class="animated fadeInUp">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Categorias
      </mat-panel-title>
      <mat-panel-description>
        Categorias utilizadas pelo seu usuário
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-categorias-select 
    [pessoaId]="usuario.pessoa.id"
    [preselects]="usuario.pessoa.categorias" 
    (selecteds)="usuario.pessoa.categorias = $event"></app-categorias-select>
  </mat-expansion-panel>

  <br>

  <mat-expansion-panel class="animated fadeInUp">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Informações
      </mat-panel-title>
      <mat-panel-description>
        Informações de pessoa
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-info-pessoal [objeto]="usuario.pessoa"></app-info-pessoal>
  </mat-expansion-panel>

  <br>

  <mat-expansion-panel class="animated fadeInUp">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Endereço
      </mat-panel-title>
      <mat-panel-description>
        Endereço do usuário
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-endereco [objeto]="usuario.pessoa.enderecos[0]"></app-endereco>

    <br>

    <agm-map 
    [latitude]="usuario.pessoa.enderecos[0].latitude" 
    [longitude]="usuario.pessoa.enderecos[0].longitude"
    [zoom]="16"
    >
      <agm-marker 
      [latitude]="usuario.pessoa.enderecos[0].latitude" 
      [longitude]="usuario.pessoa.enderecos[0].longitude"
      ></agm-marker>
    </agm-map>
  </mat-expansion-panel>
  <br>
  <button mat-button class="right purple white-text" (click)="submit()">Salvar</button>
</ng-template>